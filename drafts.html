<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <style>
        #target {
            width: 150px;
            height: 150px;
            background-color: red;
        }
    </style>
    <script>
        debugger
        ; (function (animate, undefined) {
            let targets = [];
            let timingDefault = {
                duration: 700,
                easing: 'ease-in-out',
                iterations: Infinity,
                direction: 'alternate',
                fill: 'forwards'
            };

            function _internalAnimate(selector, keyframes) {
                let players = [];
                let targets = [];
                if (typeof 'object' && selector.nodeName) {
                    targets = selector;
                } else if (typeof 'string') {
                    targets = document.querySelectorAll(selector);
                } else {
                    throw 'not a valid selector';
                }
                targets.forEach(function (target) {
                    let player = target.animate(keyframes, timingDefault);
                    players.push(player);
                });
                return players;
            };



            let _pulse = function (selector) {
                var keyframes = [{
                    "transform": "scale3d(1, 1, 1)",
                    "offset": 0
                }, {
                    "transform": "scale3d(1.05, 1.05, 1.05)",
                    "offset": 0.5
                }, {
                    "transform": "scale3d(1, 1, 1)",
                    "offset": 1
                }];
                return _internalAnimate(selector, keyframes);
            }

            return {
                pulse: _pulse,
                _internalAnimate: _internalAnimate
            }
        })(window.animate = window.animate || {});


        // let's extend the animate with new functionality
        (function (animate, undefined) {

            // public method
            debugger
            animate.flash = function (selector) {
                let keyframes = [{
                    "opacity": "1",
                    "offset": 0
                }, {
                    "opacity": "0",
                    "offset": 0.25
                }, {
                    "opacity": "1",
                    "offset": 0.5
                }, {
                    "opacity": "0",
                    "offset": 0.75
                }, {
                    "opacity": "1",
                    "offset": 1
                }];
                return window.animate._internalAnimate(selector, keyframes);
            }
        })(window.animate = window.animate || {});

        document.addEventListener('DOMContentLoaded', function (event) {
            //window.animate.pulse('#target');
            window.animate.flash('#target');
        });

    </script>
</head>
<body>
    <div id="target"></div>
</body>
</html>
